@{
    ViewData["Title"] = "Test Result";
}

<h1>Test Result</h1>

@if (ViewBag.Error != null)
{
    <div class="alert alert-danger">@ViewBag.Error</div>
}
else if (ViewBag.TestName == null || ViewBag.Subject == null)
{
    <div class="alert alert-warning">Test information is missing. Please try taking the test again.</div>
}
else
{
    <div class="card">
        <div class="card-header">
            <h3>@ViewBag.TestName (@ViewBag.Subject)</h3>
        </div>
        <div class="card-body">
            <p><strong>Score:</strong> @ViewBag.Score out of @ViewBag.Total</p>
            <p><strong>Percentage:</strong> @(ViewBag.Total > 0 ? (ViewBag.Score * 100.0 / ViewBag.Total).ToString("F2") + "%" : "N/A")</p>
            <p><strong>Result:</strong> @(ViewBag.Score >= ViewBag.Total * 0.6 ? "Pass" : "Fail")</p>
        </div>
    </div>
}

<div class="mt-3">
    <a asp-action="ListTests" asp-route-subject="@ViewBag.Subject" class="btn btn-primary">Back to Tests</a>
    <a asp-action="SelectSubject" class="btn btn-secondary">Back to Subjects</a>
</div>